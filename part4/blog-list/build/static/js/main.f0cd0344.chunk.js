(this["webpackJsonpblog-list-frontend"]=this["webpackJsonpblog-list-frontend"]||[]).push([[0],{49:function(e,t,r){},69:function(e,t,r){},71:function(e,t,r){},72:function(e,t,r){},73:function(e,t,r){},74:function(e,t,r){},78:function(e,t,r){},79:function(e,t,r){},81:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r.n(n),s=r(20),c=r.n(s),i=r(9),o=(r(16),r(49),r(7)),u=r.n(o),l=r(10),b=r(14),d=r.n(b),j="/api/blogs",p={getAll:function(){var e=Object(l.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.get(j);case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),createOne:function(){var e=Object(l.a)(u.a.mark((function e(t,r){var n,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:"bearer "+r}},e.next=3,d.a.post(j,t,n);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),deleteOne:function(){var e=Object(l.a)(u.a.mark((function e(t,r){var n,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:"bearer "+r}},e.next=3,d.a.delete("".concat(j,"/").concat(t.id),n);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),updateOne:function(){var e=Object(l.a)(u.a.mark((function e(t){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.put("".concat(j,"/").concat(t.id),t);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},h=r(44),m=r(15),f=r(8),O=(r(69),r(1)),x=a.a.forwardRef((function(e,t){x.defaultProps={appState:"LOGGED_IN"};var r=Object(n.useState)(!0),a=Object(i.a)(r,2),s=a[0],c=a[1],o="LOGGED_IN"===e.appState,u=!0===s?"none":"",l=!0===s?"":"none",b=function(e){c(e)};return Object(n.useImperativeHandle)(t,(function(){return{toggle:b}})),Object(O.jsx)("div",{children:Object(O.jsxs)(O.Fragment,{children:[Object(O.jsxs)("div",{className:e.className,style:{display:l},children:[o?Object(O.jsx)(f.a,{className:"hide",variant:"outline-primary",onClick:function(){return c(!s)},children:"hide"}):null,Object(O.jsx)("div",{className:"toggled",children:e.children})]}),Object(O.jsx)("div",{className:e.className,style:{display:u},children:o?Object(O.jsx)(f.a,{className:"show",variant:"outline-primary",onClick:function(){return c(!s)},children:"show"}):null})]})})}));x.displayName="ToggleButton";var g=x,v=(r(71),function(e){var t=e.blog,r=e.userFile,n=e.deleteButtonClicked,a=e.likeButtonClicked,s=new Date(t.createdAt),c=s.getFullYear()+"/"+(s.getMonth()+1)+"/"+s.getDate()+" - "+s.getHours()+":"+s.getMinutes(),i={display:t.user.username===r.username?"":"none"};return Object(O.jsx)(m.a,{children:Object(O.jsxs)(m.a.Body,{children:[Object(O.jsx)(m.a.Title,{children:t.title}),Object(O.jsxs)(g,{className:"content",children:[Object(O.jsx)(m.a.Text,{children:t.content}),Object(O.jsx)(m.a.Text,{className:"url",children:t.url}),Object(O.jsx)(m.a.Text,{children:c}),Object(O.jsxs)(m.a.Text,{className:"likes",children:["Likes: ",t.likes]}),Object(O.jsx)(f.a,{className:"like-button",variant:"outline-primary",name:"".concat(t.id),onClick:a,children:"like"}),Object(O.jsx)(f.a,{className:"delete-button",name:"".concat(t.id),onClick:n,style:i,variant:"outline-primary",children:"delete"})]}),Object(O.jsx)(m.a.Title,{className:"author",children:t.author})]})})}),w=(r(72),function(e){var t=e.blogs,r=e.userFile,n=e.setBlogs,a=Object(h.a)(t).sort((function(e,t){return e.likes<t.likes?1:-1})),s=function(){var e=Object(l.a)(u.a.mark((function e(a){var s,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=a.target.name,e.prev=1,c=t.find((function(e){return e.id===s})),!window.confirm("Delete blog: ".concat(c.title," ?"))){e.next=7;break}return e.next=6,p.deleteOne(c,r.token);case 6:n(t.filter((function(e){return e.id!==a.target.name})));case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}(),c=function(){var e=Object(l.a)(u.a.mark((function e(r){var a,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.target.name,e.prev=1,(s=t.find((function(e){return e.id===a}))).likes=s.likes+1,e.next=6,p.updateOne(s);case 6:n(t.filter((function(e){return e.id!==r.target.name})).concat(s)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}();return Object(O.jsx)("div",{className:"blog-list",children:a.map((function(e){return Object(O.jsx)(v,{blog:e,userFile:r,setBlogs:n,likeButtonClicked:c,deleteButtonClicked:s},e.id+"-root")}))})}),k=(r(73),function(e){var t=e.text,r=e.color;return Object(O.jsxs)("h3",{className:"error",style:{color:r,borderColor:r},children:[" ",t]})}),y="LOGGED_IN",N="NOT_LOGGED_IN",C="REGISTERING",S=r(43),B=r(34),L=r(6),A=(r(74),function(e){var t=e.setUsername,r=e.setPassword,n=e.className,a=e.submitButtonClicked;return Object(O.jsxs)(L.a,{className:n,onSubmit:a,children:[Object(O.jsx)(L.a.Label,{children:"Username"}),Object(O.jsx)(L.a.Control,{type:"text",placeholder:"Enter username",onChange:function(e){return t(e.target.value)}}),Object(O.jsx)(L.a.Label,{children:"Password"}),Object(O.jsx)(L.a.Control,{type:"password",placeholder:"Enter password",onChange:function(e){return r(e.target.value)}}),Object(O.jsx)("br",{}),Object(O.jsx)(f.a,{id:"login-button",variant:"outline-primary",type:"submit",name:"login",children:"login"}),Object(O.jsx)(f.a,{id:"register-button-on-login",variant:"outline-primary",type:"submit",name:"register-screen",children:"register"})]})}),T=(r(78),function(e){var t=e.submitButtonClicked,r=e.setNewTitle,n=e.setNewAuthor,a=e.setNewURL,s=e.setNewContent;return Object(O.jsxs)(L.a,{className:"newBlog",onSubmit:t,children:[Object(O.jsx)(L.a.Label,{children:"Title"}),Object(O.jsx)(L.a.Control,{type:"text",placeholder:"Title",onChange:function(e){return r(e.target.value)}}),Object(O.jsx)(L.a.Label,{children:"Author"}),Object(O.jsx)(L.a.Control,{type:"text",placeholder:"Author",onChange:function(e){return n(e.target.value)}}),Object(O.jsx)(L.a.Label,{children:"Url"}),Object(O.jsx)(L.a.Control,{type:"text",placeholder:"http://",defaultValue:"http://",onChange:function(e){return a(e.target.value)}}),Object(O.jsx)(L.a.Label,{children:"Content"}),Object(O.jsx)(L.a.Control,{id:"content",as:"textarea",placeholder:"Content",row:5,maxLength:255,onChange:function(e){return s(e.target.value)}}),Object(O.jsx)("br",{}),Object(O.jsx)(f.a,{id:"save-button",variant:"outline-primary",type:"submit",name:"save",children:"save"}),Object(O.jsx)(f.a,{id:"clear-button",variant:"outline-primary",type:"submit",name:"clear",children:"clear"})]})}),E=(r(79),function(e){var t=e.submitButtonClicked,r=e.setUsername,n=e.setPassword,a=e.setFullName;return Object(O.jsxs)(L.a,{className:"registration-form",onSubmit:t,children:[Object(O.jsx)(L.a.Label,{children:"Username"}),Object(O.jsx)(L.a.Control,{type:"text",placeholder:"Enter username",onChange:function(e){return r(e.target.value)}}),Object(O.jsx)(L.a.Label,{children:"Password"}),Object(O.jsx)(L.a.Control,{type:"password",placeholder:"Enter password",onChange:function(e){return n(e.target.value)}}),Object(O.jsx)("div",{id:"pw-rule",children:Object(O.jsxs)("ul",{children:["must contain 8-32 characters of at least:",Object(O.jsx)("li",{children:"1 lowercase"}),Object(O.jsx)("li",{children:"1 uppercase"}),Object(O.jsx)("li",{children:"1 number"})]})}),Object(O.jsx)(L.a.Label,{children:"Full Name"}),Object(O.jsx)(L.a.Control,{type:"text",placeholder:"Enter Screen Name",onChange:function(e){return a(e.target.value)}}),Object(O.jsx)("br",{}),Object(O.jsx)(f.a,{id:"register-button",variant:"outline-primary",type:"submit",name:"register",children:"register"}),Object(O.jsx)(f.a,{id:"back-button",variant:"outline-primary",type:"submit",name:"back",children:"back"})]})}),R={login:function(){var e=Object(l.a)(u.a.mark((function e(t){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.post("/api/login",t);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},F={registerUser:function(){var e=Object(l.a)(u.a.mark((function e(t){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.post("/api/users",t);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},G=function(e){var t=e.appState,r=e.displayNotificationMessage,a=e.setUserFile,s=e.setAppState,c=e.userFile,o=e.setBlogs,b=e.blogs,d=Object(n.useState)(""),j=Object(i.a)(d,2),h=j[0],m=j[1],x=Object(n.useState)(""),v=Object(i.a)(x,2),w=v[0],k=v[1],S=Object(n.useState)(""),B=Object(i.a)(S,2),L=B[0],G=B[1],U=Object(n.useState)(""),I=Object(i.a)(U,2),P=I[0],D=I[1],J=Object(n.useRef)(),M=Object(n.useState)(""),_=Object(i.a)(M,2),z=_[0],H=_[1],K=Object(n.useState)(""),V=Object(i.a)(K,2),W=V[0],Y=V[1],Z=Object(n.useState)(""),$=Object(i.a)(Z,2),q=$[0],Q=$[1],X=function(){var e=Object(l.a)(u.a.mark((function e(t){var n,i,l,d,j,m;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),n=t.nativeEvent.submitter.name,i={username:z,password:W},l={title:h,author:w,url:L||"no url",content:P||"no content"},d={username:z,password:W,name:q},e.t0=n,e.next="login"===e.t0?8:"save"===e.t0?25:"register-screen"===e.t0?41:"register"===e.t0?43:"back"===e.t0?69:72;break;case 8:if(""!==z&&""!==W){e.next=10;break}return e.abrupt("return",r("username and password cannot be empty","Red",2e3));case 10:return e.prev=10,e.next=13,R.login(i);case 13:j=e.sent,a(j),window.localStorage.setItem("token",JSON.stringify(j)),r("Logged In","Green",3e3),s(y),e.next=24;break;case 20:return e.prev=20,e.t1=e.catch(10),r("Wrong credentials","Red",3e3),e.abrupt("return");case 24:return e.abrupt("break",72);case 25:if(""!==h&&""!==w){e.next=27;break}return e.abrupt("return",r("Title and Author cannot be Empty","Red",3e3));case 27:return e.prev=27,e.next=30,p.createOne(l,c.token);case 30:m=e.sent,o(b.concat(m)),r("blog is saved succesfully","Green",3e3),J.current.toggle(!1),e.next=40;break;case 36:return e.prev=36,e.t2=e.catch(27),r(e.t2.message,"Red",2e3),e.abrupt("return");case 40:return e.abrupt("break",72);case 41:return s(C),e.abrupt("break",72);case 43:if(z&&W){e.next=48;break}return r("username or password cannot be empty","Red",3e3),e.abrupt("return");case 48:if(!(z.legnth<3)){e.next=53;break}return r("username must contain at least 3 characters","Red",3e3),e.abrupt("return");case 53:if(W.match("^(?=.*[0-9])(?=.*[a-z])(?=.*[A-Z]).{8,32}$")){e.next=56;break}return r("password must contain 8-32 chars and at least 1 lowercase, 1 uppercase, and 1 number","Red",5e3),e.abrupt("return");case 56:return e.prev=56,e.next=59,F.registerUser(d);case 59:r("Successfully Registered, Please Log in","Green",3e3),e.next=66;break;case 62:return e.prev=62,e.t3=e.catch(56),r(JSON.stringify(e.t3.response.data.error),"Red",5e3),e.abrupt("return");case 66:case 69:return Q(""),s(N),e.abrupt("break",72);case 72:t.target.reset(),H(""),Y("");case 75:case"end":return e.stop()}}),e,null,[[10,20],[27,36],[56,62]])})));return function(t){return e.apply(this,arguments)}}();return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(f.a,{id:"logout-button",variant:"outline-primary",style:{display:t===y?"":"none"},onClick:function(){window.localStorage.removeItem("token"),window.confirm("Are you sure you would like to log out?")&&(a(null),s(N),J.current.toggle(!0))},name:"logout",children:"logout"}),Object(O.jsx)(g,{className:"toggle-container",appState:t,ref:J,children:function(){switch(t){case N:return Object(O.jsx)(A,{className:"login-form",submitButtonClicked:X,setUsername:H,setPassword:Y});case y:return Object(O.jsx)(T,{className:"newBlog",submitButtonClicked:X,setNewTitle:m,setNewAuthor:k,setNewURL:G,setNewContent:D});case C:return Object(O.jsx)(E,{className:"register-form",submitButtonClicked:X,setUsername:H,setPassword:Y,setFullName:Q})}}()})]})},U=function(e){return"{}"===JSON.stringify(e)},I=function(){var e=Object(n.useState)(N),t=Object(i.a)(e,2),r=t[0],a=t[1],s=Object(n.useState)(null),c=Object(i.a)(s,2),o=c[0],u=c[1],l=Object(n.useState)({}),b=Object(i.a)(l,2),d=b[0],j=b[1],h=Object(n.useState)([]),m=Object(i.a)(h,2),f=m[0],x=m[1];Object(n.useEffect)((function(){var e=window.localStorage.getItem("token");if(e){var t=JSON.parse(e);u(t),a(y)}p.getAll().then((function(e){x(e)}))}),[]);return Object(O.jsxs)("div",{className:"App",children:[Object(O.jsxs)("header",{id:"app-header",children:[Object(O.jsx)("h1",{id:"app-title",children:"My Blog"}),Object(O.jsx)("h5",{id:"log-status",children:o?"Logged in as ".concat(o.username):null})]}),Object(O.jsxs)(S.a,{defaultActiveKey:"home",id:"uncontrolled-tab-example",children:[Object(O.jsxs)(B.a,{eventKey:"home",title:"Home",children:[U(d)?null:Object(O.jsx)(k,{text:d.text,color:d.color}),Object(O.jsx)(G,{appState:r,displayNotificationMessage:function(e,t,r){U(d)||(j({}),clearTimeout(d.timeout));var n=setTimeout((function(){j({})}),r);j({text:e,color:t,timeout:n})},setUserFile:u,setAppState:a,userFile:o,setBlogs:x,blogs:f}),r===y?Object(O.jsx)(w,{blogs:f,userFile:o,setBlogs:x}):null]}),Object(O.jsx)(B.a,{eventKey:"profile",title:"Profile"})]})]})};c.a.render(Object(O.jsx)(I,{}),document.getElementById("root"))}},[[81,1,2]]]);
//# sourceMappingURL=main.f0cd0344.chunk.js.map