(this["webpackJsonpblog-list-frontend"]=this["webpackJsonpblog-list-frontend"]||[]).push([[0],{49:function(e,t,n){},69:function(e,t,n){},71:function(e,t,n){},72:function(e,t,n){},73:function(e,t,n){},74:function(e,t,n){},78:function(e,t,n){},79:function(e,t,n){},81:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),s=n(20),c=n.n(s),o=n(9),i=(n(16),n(49),n(7)),u=n.n(i),l=n(10),b=n(14),d=n.n(b),j="/api/blogs",p={getAll:function(){var e=Object(l.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.get(j);case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),createOne:function(){var e=Object(l.a)(u.a.mark((function e(t,n){var r,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={headers:{Authorization:"bearer "+n}},e.next=3,d.a.post(j,t,r);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),deleteOne:function(){var e=Object(l.a)(u.a.mark((function e(t,n){var r,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={headers:{Authorization:"bearer "+n}},e.next=3,d.a.delete("".concat(j,"/").concat(t.id),r);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),updateOne:function(){var e=Object(l.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.put("".concat(j,"/").concat(t.id),t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},f=n(44),h=n(15),m=n(8),O=(n(69),n(1)),x=a.a.forwardRef((function(e,t){x.defaultProps={appState:"LOGGED_IN"};var n=Object(r.useState)(!0),a=Object(o.a)(n,2),s=a[0],c=a[1],i="LOGGED_IN"===e.appState,u=!0===s?"none":"",l=!0===s?"":"none",b=function(e){c(e)};return Object(r.useImperativeHandle)(t,(function(){return{toggle:b}})),Object(O.jsx)("div",{children:Object(O.jsxs)(O.Fragment,{children:[Object(O.jsxs)("div",{className:e.className,style:{display:l},children:[i?Object(O.jsx)(m.a,{className:"hide",variant:"outline-primary",onClick:function(){return c(!s)},children:"hide"}):null,Object(O.jsx)("div",{className:"toggled",children:e.children})]}),Object(O.jsx)("div",{className:e.className,style:{display:u},children:i?Object(O.jsx)(m.a,{className:"show",variant:"outline-primary",onClick:function(){return c(!s)},children:"show"}):null})]})})}));x.displayName="ToggleButton";var g=x,v=(n(71),function(e){var t=e.blog,n=e.userFile,r=e.deleteButtonClicked,a=e.likeButtonClicked,s=new Date(t.createdAt),c=s.getFullYear()+"/"+(s.getMonth()+1)+"/"+s.getDate()+" - "+s.getHours()+":"+s.getMinutes(),o={display:t.user.username===n.username?"":"none"};return Object(O.jsx)(h.a,{children:Object(O.jsxs)(h.a.Body,{children:[Object(O.jsx)(h.a.Title,{children:t.title}),Object(O.jsxs)(g,{className:"content",children:[Object(O.jsx)(h.a.Text,{children:t.content}),Object(O.jsx)(h.a.Text,{className:"url",children:t.url}),Object(O.jsx)(h.a.Text,{children:c}),Object(O.jsxs)(h.a.Text,{className:"likes",children:["Likes: ",t.likes]}),Object(O.jsx)(m.a,{className:"like-button",variant:"outline-primary",name:"".concat(t.id),onClick:a,children:"like"}),Object(O.jsx)(m.a,{className:"delete-button",name:"".concat(t.id),onClick:r,style:o,variant:"outline-primary",children:"delete"})]}),Object(O.jsx)(h.a.Title,{className:"author",children:t.author})]})})}),y=(n(72),function(e){var t=e.blogs,n=e.userFile,r=e.setBlogs,a=Object(f.a)(t).sort((function(e,t){return e.likes<t.likes?1:-1})),s=function(){var e=Object(l.a)(u.a.mark((function e(a){var s,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=a.target.name,e.prev=1,c=t.find((function(e){return e.id===s})),!window.confirm("Delete blog: ".concat(c.title," ?"))){e.next=7;break}return e.next=6,p.deleteOne(c,n.token);case 6:r(t.filter((function(e){return e.id!==a.target.name})));case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}(),c=function(){var e=Object(l.a)(u.a.mark((function e(n){var a,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.target.name,e.prev=1,(s=t.find((function(e){return e.id===a}))).likes=s.likes+1,e.next=6,p.updateOne(s);case 6:r(t.filter((function(e){return e.id!==n.target.name})).concat(s)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}();return Object(O.jsx)("div",{className:"blog-list",children:a.map((function(e){return Object(O.jsx)(v,{blog:e,userFile:n,setBlogs:r,likeButtonClicked:c,deleteButtonClicked:s},e.id+"-root")}))})}),k=(n(73),function(e){var t=e.text,n=e.color;return Object(O.jsxs)("h3",{className:"error",style:{color:n,borderColor:n},children:[" ",t]})}),w="LOGGED_IN",N="NOT_LOGGED_IN",C="REGISTERING",S=n(43),B=n(34),L=n(6),T=(n(74),function(e){var t=e.setUsername,n=e.setPassword,r=e.className,a=e.submitButtonClicked;return Object(O.jsxs)(L.a,{className:r,onSubmit:a,children:[Object(O.jsx)(L.a.Label,{children:"Username"}),Object(O.jsx)(L.a.Control,{type:"text",placeholder:"Enter username",onChange:function(e){return t(e.target.value)}}),Object(O.jsx)(L.a.Label,{children:"Password"}),Object(O.jsx)(L.a.Control,{type:"password",placeholder:"Enter password",onChange:function(e){return n(e.target.value)}}),Object(O.jsx)("br",{}),Object(O.jsx)(m.a,{id:"login-button",variant:"outline-primary",type:"submit",name:"login",children:"login"}),Object(O.jsx)(m.a,{id:"register-button-on-login",variant:"outline-primary",type:"submit",name:"register-screen",children:"register"})]})}),A=(n(78),function(e){var t=e.submitButtonClicked,n=e.setNewTitle,r=e.setNewAuthor,a=e.setNewURL,s=e.setNewContent;return Object(O.jsxs)(L.a,{className:"newBlog",onSubmit:t,children:[Object(O.jsx)(L.a.Label,{children:"Title"}),Object(O.jsx)(L.a.Control,{type:"text",placeholder:"Title",onChange:function(e){return n(e.target.value)}}),Object(O.jsx)(L.a.Label,{children:"Author"}),Object(O.jsx)(L.a.Control,{type:"text",placeholder:"Author",onChange:function(e){return r(e.target.value)}}),Object(O.jsx)(L.a.Label,{children:"Url"}),Object(O.jsx)(L.a.Control,{type:"text",placeholder:"http://",defaultValue:"http://",onChange:function(e){return a(e.target.value)}}),Object(O.jsx)(L.a.Label,{children:"Content"}),Object(O.jsx)(L.a.Control,{id:"content",as:"textarea",placeholder:"Content",row:5,maxLength:255,onChange:function(e){return s(e.target.value)}}),Object(O.jsx)("br",{}),Object(O.jsx)(m.a,{id:"save-button",variant:"outline-primary",type:"submit",name:"save",children:"save"}),Object(O.jsx)(m.a,{id:"clear-button",variant:"outline-primary",type:"submit",name:"clear",children:"clear"})]})}),E=(n(79),function(e){var t=e.submitButtonClicked,n=e.setUsername,r=e.setPassword,a=e.setFullName;return Object(O.jsxs)(L.a,{className:"registration-form",onSubmit:t,children:[Object(O.jsx)(L.a.Label,{children:"Username"}),Object(O.jsx)(L.a.Control,{type:"text",placeholder:"Enter username",onChange:function(e){return n(e.target.value)}}),Object(O.jsx)(L.a.Label,{children:"Password"}),Object(O.jsx)(L.a.Control,{type:"password",placeholder:"Enter password",onChange:function(e){return r(e.target.value)}}),Object(O.jsx)(L.a.Label,{children:"Full Name"}),Object(O.jsx)(L.a.Control,{type:"text",placeholder:"Enter Full Name",onChange:function(e){return a(e.target.value)}}),Object(O.jsx)("br",{}),Object(O.jsx)(m.a,{id:"register-button",variant:"outline-primary",type:"submit",name:"register",children:"register"}),Object(O.jsx)(m.a,{id:"back-button",variant:"outline-primary",type:"submit",name:"back",children:"back"})]})}),F={login:function(){var e=Object(l.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.post("/api/login",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},G={registerUser:function(){var e=Object(l.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.post("/api/users",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},U=function(e){var t=e.appState,n=e.displayNotificationMessage,a=e.setUserFile,s=e.setAppState,c=e.userFile,i=e.setBlogs,b=e.blogs,d=Object(r.useState)(""),j=Object(o.a)(d,2),f=j[0],h=j[1],x=Object(r.useState)(""),v=Object(o.a)(x,2),y=v[0],k=v[1],S=Object(r.useState)(""),B=Object(o.a)(S,2),L=B[0],U=B[1],I=Object(r.useState)(""),R=Object(o.a)(I,2),P=R[0],D=R[1],J=Object(r.useRef)(),M=Object(r.useState)(""),_=Object(o.a)(M,2),H=_[0],K=_[1],z=Object(r.useState)(""),V=Object(o.a)(z,2),W=V[0],Y=V[1],q=Object(r.useState)(""),Q=Object(o.a)(q,2),X=Q[0],Z=Q[1],$=function(){var e=Object(l.a)(u.a.mark((function e(t){var r,o,l,d,j,h;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),r=t.nativeEvent.submitter.name,o={username:H,password:W},l={title:f,author:y,url:L||"no url",content:P||"no content"},d={username:H,password:W,name:X},e.t0=r,e.next="login"===e.t0?8:"save"===e.t0?25:"register-screen"===e.t0?41:"register"===e.t0?43:"back"===e.t0?56:59;break;case 8:if(H&&W){e.next=10;break}return e.abrupt("return",n("username and password cannot be empty","Red",2e3));case 10:return e.prev=10,e.next=13,F.login(o);case 13:j=e.sent,a(j),window.localStorage.setItem("token",JSON.stringify(j)),n("Logged In","Green",3e3),s(w),e.next=24;break;case 20:return e.prev=20,e.t1=e.catch(10),n("Wrong credentials","Red",3e3),e.abrupt("return");case 24:return e.abrupt("break",59);case 25:if(""!==f&&""!==y){e.next=27;break}return e.abrupt("return",n("Title and Author cannot be Empty","Red",3e3));case 27:return e.prev=27,e.next=30,p.createOne(l,c.token);case 30:h=e.sent,i(b.concat(h)),n("blog is saved succesfully","Green",3e3),J.current.toggle(!1),e.next=40;break;case 36:return e.prev=36,e.t2=e.catch(27),n(e.t2.message,"Red",2e3),e.abrupt("return");case 40:return e.abrupt("break",59);case 41:return s(C),e.abrupt("break",59);case 43:return e.prev=43,e.next=46,G.registerUser(d);case 46:n("Successfully Registered, Please Log in","Green",3e3),e.next=53;break;case 49:return e.prev=49,e.t3=e.catch(43),n(JSON.stringify(e.t3.response.data.error),"Red",5e3),e.abrupt("return");case 53:case 56:return Z(""),s(N),e.abrupt("break",59);case 59:t.target.reset(),K(""),Y("");case 62:case"end":return e.stop()}}),e,null,[[10,20],[27,36],[43,49]])})));return function(t){return e.apply(this,arguments)}}();return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(m.a,{id:"logout-button",variant:"outline-primary",style:{display:t===w?"":"none"},onClick:function(){window.localStorage.removeItem("token"),window.confirm("Are you sure you would like to log out?")&&(a(null),s(N),J.current.toggle(!0))},name:"logout",children:"logout"}),Object(O.jsx)(g,{className:"toggle-container",appState:t,ref:J,children:function(){switch(t){case N:return Object(O.jsx)(T,{className:"login-form",submitButtonClicked:$,setUsername:K,setPassword:Y});case w:return Object(O.jsx)(A,{className:"newBlog",submitButtonClicked:$,setNewTitle:h,setNewAuthor:k,setNewURL:U,setNewContent:D});case C:return Object(O.jsx)(E,{className:"register-form",submitButtonClicked:$,setUsername:K,setPassword:Y,setFullName:Z})}}()})]})},I=function(e){return"{}"===JSON.stringify(e)},R=function(){var e=Object(r.useState)(N),t=Object(o.a)(e,2),n=t[0],a=t[1],s=Object(r.useState)(null),c=Object(o.a)(s,2),i=c[0],u=c[1],l=Object(r.useState)({}),b=Object(o.a)(l,2),d=b[0],j=b[1],f=Object(r.useState)([]),h=Object(o.a)(f,2),m=h[0],x=h[1];Object(r.useEffect)((function(){var e=window.localStorage.getItem("token");if(e){var t=JSON.parse(e);u(t),a(w)}p.getAll().then((function(e){x(e)}))}),[]);return Object(O.jsxs)("div",{className:"App",children:[Object(O.jsxs)("header",{id:"app-header",children:[Object(O.jsx)("h1",{id:"app-title",children:"My Blog"}),Object(O.jsx)("h5",{id:"log-status",children:i?"Logged in as ".concat(i.username):null})]}),Object(O.jsxs)(S.a,{defaultActiveKey:"home",id:"uncontrolled-tab-example",children:[Object(O.jsxs)(B.a,{eventKey:"home",title:"Home",children:[I(d)?null:Object(O.jsx)(k,{text:d.text,color:d.color}),Object(O.jsx)(U,{appState:n,displayNotificationMessage:function(e,t,n){I(d)||(j({}),clearTimeout(d.timeout));var r=setTimeout((function(){j({})}),n);j({text:e,color:t,timeout:r})},setUserFile:u,setAppState:a,userFile:i,setBlogs:x,blogs:m}),n===w?Object(O.jsx)(y,{blogs:m,userFile:i,setBlogs:x}):null]}),Object(O.jsx)(B.a,{eventKey:"profile",title:"Profile"})]})]})};c.a.render(Object(O.jsx)(R,{}),document.getElementById("root"))}},[[81,1,2]]]);
//# sourceMappingURL=main.a14a9525.chunk.js.map